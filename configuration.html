<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.5.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="assets/images/favicon.png">
<title>Configuration · Scala Native Bindgen</title>
<link rel="stylesheet" href="assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="assets/stylesheets/application-palette.22915126.css">
<meta name="theme-color" content="#3f51b5" />
<link rel="stylesheet" href="lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="lib/prettify/prettify.css">
<script src="assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="assets/fonts/font-awesome.css">
<link rel="stylesheet" href="assets/fonts/material-icons.css">
<link rel="stylesheet" href="assets/stylesheets/paradox-material-theme.css">
</head>
<body
data-md-color-primary="indigo"
data-md-color-accent="indigo"
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="index.html" title="Scala Native Bindgen" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Scala Native Bindgen
</span>
<span class="md-header-nav__topic">
Configuration
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/scala-native/scala-native-bindgen"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
scala-native/scala-native-bindgen
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="index.html" title="Scala Native Bindgen" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="index.html" title="Scala Native Bindgen">
Scala Native Bindgen
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/scala-native/scala-native-bindgen"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
scala-native/scala-native-bindgen
</div>
</a>

</div>
<ul>
  <li><a href="sbt.html" class="page">Generating Bindings with sbt</a></li>
  <li><a href="cli.html" class="page">Generating Bindings with the CLI</a></li>
  <li><a href="using-bindings.html" class="page">Using Bindings</a></li>
  <li><a href="configuration.html" class="active page">Configuration</a></li>
  <li><a href="limitations.html" class="page">Limitations</a></li>
  <li><a href="bindings/index.html" class="page">Bindings</a>
  <ul>
    <li><a href="bindings/posix.html" class="page">POSIX</a></li>
    <li><a href="bindings/iconv.html" class="page">Iconv - Character set conversion</a></li>
    <li><a href="bindings/utf8proc.html" class="page">Utf8proc - UTF-8 text processing</a></li>
  </ul></li>
  <li><a href="contrib/index.html" class="page">Contributor&rsquo;s Guide</a>
  <ul>
    <li><a href="contrib/guidelines.html" class="page">Guide for contributors</a></li>
    <li><a href="contrib/cmake.html" class="page">Building the executable with <code>CMake</code></a></li>
    <li><a href="contrib/docker-compose.html" class="page">Building the executable with <code>docker-compose</code></a></li>
    <li><a href="contrib/bindings.html" class="page">Contributing Bindings</a></li>
    <li><a href="contrib/releasing.html" class="page">Release Workflow</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="configuration.html#configuration" class="header">Configuration</a>
  <ul>
    <li><a href="configuration.html#excluding-definitions-by-prefix" class="header">Excluding Definitions By Prefix</a></li>
    <li><a href="configuration.html#binding-configuration-file" class="header">Binding Configuration File</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.3.1
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="configuration.html#configuration" class="header">Configuration</a>
  <ul>
    <li><a href="configuration.html#excluding-definitions-by-prefix" class="header">Excluding Definitions By Prefix</a></li>
    <li><a href="configuration.html#binding-configuration-file" class="header">Binding Configuration File</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#configuration" name="configuration" class="anchor"><span class="anchor-link"></span></a>Configuration</h1>
<p>Bindgen provides several options for configuring what to include and how to output the generated bindings. The options can be provided to the CLI or as part of the sbt bindings declaration.</p>
<div class="toc ">
<ul>
  <li><a href="configuration.html#excluding-definitions-by-prefix" class="header">Excluding Definitions By Prefix</a></li>
  <li><a href="configuration.html#binding-configuration-file" class="header">Binding Configuration File</a>
  <ul>
    <li><a href="configuration.html#using-types-from-third-party-bindings" class="header">Using Types From Third Party Bindings</a></li>
    <li><a href="configuration.html#using-types-from-the-scala-native-bindings" class="header">Using Types From the Scala Native Bindings</a></li>
  </ul></li>
</ul>
</div>
<h2><a href="#excluding-definitions-by-prefix" name="excluding-definitions-by-prefix" class="anchor"><span class="anchor-link"></span></a>Excluding Definitions By Prefix</h2>
<p>Definitions may be excluded by their prefix. This is useful when private definitions should not be part of the generated binding. This is often the case for definitions starting with <code>__</code>.</p>
<dl>
  <dt>sbt</dt>
  <dd>
  <pre class="prettyprint"><code class="language-sbt">NativeBinding(pathToHeader)
  .excludePrefix(&quot;__&quot;)</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/build.sbt#L172-L173">Full source at GitHub</a></dd>
  <dt>CLI</dt>
  <dd>
  <pre class="prettyprint"><code class="language-sh">scala-native-bindgen --binding-config=/path/to/config
</code></pre></dd>
</dl>
<p>To exemplify consider the following header file:</p>
<pre class="prettyprint"><code class="language-h">int access(const char *path, int mode);
int read(int fildes, void *buf, int nbyte);
int printf(const char *restrict format, ...);
int __excluded(void);</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/sbt-scala-native-bindgen/src/sbt-test/bindgen/generate/src/main/resources/stdlib.h">Full source at GitHub</a>
<p>When the exclude prefix is set to <code>__</code>, then the resulting bindings will be:</p>
<pre class="prettyprint"><code class="language-scala">package org.example.app.stdlib

import scala.scalanative._
import scala.scalanative.native._

@native.extern
object stdlib {
  def access(path: native.CString, mode: native.CInt): native.CInt = native.extern
  def read(fildes: native.CInt, buf: native.Ptr[Byte], nbyte: native.CInt): native.CInt = native.extern
  def printf(format: native.CString, varArgs: native.CVararg*): native.CInt = native.extern
}</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/sbt-scala-native-bindgen/src/sbt-test/bindgen/generate/expected/stdlib.scala">Full source at GitHub</a>
<h2><a href="#binding-configuration-file" name="binding-configuration-file" class="anchor"><span class="anchor-link"></span></a>Binding Configuration File</h2>
<p>The binding configuration is a JSON file which allows to map the path of a header file to the associated object as well as the names of the C types and symbols to their respective Scala types and definitions. The configuration file can be used when integrating with third party bindings.</p>
<dl>
  <dt>sbt</dt>
  <dd>
  <pre class="prettyprint"><code class="language-sbt">NativeBinding(pathToHeader)
  .bindingConfig(pathToConfig)</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/build.sbt#L163-L164">Full source at GitHub</a></dd>
  <dt>CLI</dt>
  <dd>
  <pre class="prettyprint"><code class="language-sh">scala-native-bindgen --binding-config=/path/to/config
</code></pre></dd>
</dl>
<h3><a href="#using-types-from-third-party-bindings" name="using-types-from-third-party-bindings" class="anchor"><span class="anchor-link"></span></a>Using Types From Third Party Bindings</h3>
<p>If you need to generate bindings that uses types from bindings that have not been generated with <code>scala-native-bindgen</code> you have to provide the mapping between the header path and the Scala object&rsquo;s fully qualified name. And in some cases also the Scala name of the C types. Using the vector library example from <a href="using-bindings.html">Using Bindings</a>, let&rsquo;s assume that the vector library was created so that <code>struct point</code> was named <code>Point</code>:</p>
<pre class="prettyprint"><code class="language-scala">package com.example.custom.binding

import scala.scalanative._
import scala.scalanative.native._

@native.link(&quot;vector&quot;)
@native.extern
object Vector {
  type Point       = native.CStruct2[native.CFloat, native.CFloat]
  type LineSegment = native.CStruct2[Point, Point]
  // ...
</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/docs/src/test/scala/com/example/custom/binding/Vector.scala#L2-L60">Full source at GitHub</a>
<p>To use this binding, create a configuration file with the folllowing content, where <code>path</code> is the name of the header file (usually the part of the path inside the <code>/usr/include</code> or <code>/usr/local/include</code> directory), <code>object</code> is the fully qualified name of the Scala object (i.e. package name as well as the Scala object name) and finally <code>names</code> for each of the types:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;vector.h&quot;: {
    &quot;object&quot;: &quot;com.example.custom.binding.Vector&quot;,
    &quot;names&quot;: {
      &quot;struct point&quot;: &quot;Point&quot;,
      &quot;struct lineSegment&quot;: &quot;LineSegment&quot;
    }
  }
}</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/docs/src/test/resources/3rd-party-bindings/config.json">Full source at GitHub</a>
<p>Now in the library you are creating a binding for, any usage of <code>struct point</code>:</p>
<pre class="prettyprint"><code class="language-h">struct circle {
    struct point point;
    double radius;
};</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/docs/src/test/resources/3rd-party-bindings/geometry.h#L4-L7">Full source at GitHub</a>
<p>will reference the <code>Point</code> type alias inside the <code>Vector</code> object:</p>
<pre class="prettyprint"><code class="language-scala">type struct_circle = native.CStruct2[com.example.custom.binding.Vector.Point, native.CDouble]</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/docs/src/test/scala/org/example/Geometry.scala#L10">Full source at GitHub</a>
<h3><a href="#using-types-from-the-scala-native-bindings" name="using-types-from-the-scala-native-bindings" class="anchor"><span class="anchor-link"></span></a>Using Types From the Scala Native Bindings</h3>
<p>Similar to the above, the following example shows how you can use types defined in the <a href="http://www.scala-native.org/en/latest/lib/libc.html">C standard library</a> and <a href="http://www.scala-native.org/en/latest/lib/posixlib.html">C POSIX library</a> bindings shipped with Scala Native. Let&rsquo;s assume we have a binding with a method that uses the <code>FILE</code> type from <code>&lt;stdio.h&gt;</code>:</p>
<pre class="prettyprint"><code class="language-h">int wordcount(struct wordcount *wordcount, FILE *file);</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/docs/src/test/resources/scala-native-bindings/wordcount.h#L10">Full source at GitHub</a>
<p>We can then write a binding configuration that maps the header name to the object defined in Scala Native.</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;stdio.h&quot;: {
    &quot;object&quot;: &quot;scala.scalanative.native.stdio&quot;
  },
  &quot;_stdio.h&quot;: {
    &quot;object&quot;: &quot;scala.scalanative.native.stdio&quot;
  }
}</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/docs/src/test/resources/scala-native-bindings/config.json">Full source at GitHub</a><div class="callout note "><div class="callout-title">Note</div>
<p>In the above binding configuration, we duplicate the mapping to work on both Linux and macOS since on macOS the definition of <code>FILE</code> is found inside <code>/usr/include/_stdio.h</code>.</p></div>
<p>The generated binding will then use the <code>stdio.h</code> binding provided by Scala Native:</p>
<pre class="prettyprint"><code class="language-scala">def wordcount(wordcount: native.Ptr[struct_wordcount], file: native.Ptr[scala.scalanative.native.stdio.FILE]): native.CInt = native.extern</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/docs/src/test/scala/org/example/WordCount.scala#L11">Full source at GitHub</a>
<p>And we can use the binding by opening a file using <code>fopen(...)</code>:</p>
<pre class="prettyprint"><code class="language-scala">import org.example.wordcount.WordCount._
import scalanative.native._

Zone { implicit zone =&gt;
  val result = struct_wordcount()
  val file   = stdio.fopen(pathToFile, c&quot;r&quot;)
  val code   = wordcount(result, file)
  stdio.fclose(file)
}</code></pre><a href="https://github.com/scala-native/scala-native-bindgen/tree/master/docs/src/test/scala/org/scalanative/bindgen/docs/WordCountSpec.scala#L9-L33">Full source at GitHub</a>
</div>
<div>
<a href="https://github.com/scala-native/scala-native-bindgen/tree/master/docs/src/paradox/configuration.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.3.1
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="using-bindings.html" title="Using Bindings" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Using Bindings
</span>
</div>
</a>
<a href="limitations.html" title="Limitations" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Limitations
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Copyright © Liudmila Kornilova, distributed under the <a href='https://github.com/scala-native/scala-native-bindgenblob/master/LICENSE.txt'>Scala license</a>.
</div>
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="assets/javascripts/application.583bbe55.js"></script>
<script src="assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"."}})</script>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
